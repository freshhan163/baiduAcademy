<mxfile host="app.diagrams.net" modified="2021-11-08T10:02:07.359Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36" etag="mqHDxkdghjKUUhCITXyt" version="15.6.8" type="github" pages="4">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1298" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="#F4F1DE" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="UXwH12U0V8vb7j7wDYNW-2" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-0" target="UXwH12U0V8vb7j7wDYNW-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-0" value="yarn dev:local" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="50" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-1" target="UXwH12U0V8vb7j7wDYNW-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-32" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-1" target="UXwH12U0V8vb7j7wDYNW-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-1" value="nodemon.json&lt;br&gt;启动 server/dev.ts" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="50" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-4" value="apps/live-pc/server/dev.ts" style="swimlane;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;startSize=23;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="330" y="160" width="450" height="870" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-28" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-4" source="UXwH12U0V8vb7j7wDYNW-6" target="UXwH12U0V8vb7j7wDYNW-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-6" value="checkVersion()&lt;br&gt;检查node和npm版本" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-4" vertex="1">
          <mxGeometry x="90" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-7" value="debugFactory()&lt;br&gt;开启一个debug环境" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-4" vertex="1">
          <mxGeometry x="90" y="110" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-8" value="引用中间件" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-4" vertex="1">
          <mxGeometry x="30" y="290" width="390" height="510" as="geometry">
            <mxRectangle x="30" y="300" width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-9" value="logMiddleware：日志" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="30" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-10" value="healthCheckMidlleware：健康检查" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="60" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-11" value="koaStatic：静态服务" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="90" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-22" value="创建proxy" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="120" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-21" value="honeypot：提供graphql查询服务" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="150" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-20" value="添加/live_graphql转发代理" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="180" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-19" value="测试环境中间件：apiSwitch | devProxy" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="210" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-18" value="其他中间件：fontSecurity | redirect | defaultCookies" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="240" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zSpuA0mYiwOrzfMlxcmh-1" value="其他中间件：thirdParty | sentryMiddleware" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="UXwH12U0V8vb7j7wDYNW-8">
          <mxGeometry y="270" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zSpuA0mYiwOrzfMlxcmh-2" value="mountDevMiddlleware：为ctx添加devBuildMap参数" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;fontStyle=1" vertex="1" parent="UXwH12U0V8vb7j7wDYNW-8">
          <mxGeometry y="300" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-17" value="buildCompilerDevMiddleware(app)：执行webpack构建" style="text;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="330" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-16" value="webpackMiddleware(app)：启动webpack dev server服务" style="text;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="360" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-15" value="render中间件：判断返回构建结果中的clientRender 或 serverRender" style="text;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontStyle=1" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="390" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zSpuA0mYiwOrzfMlxcmh-0" value="其他中间件：launchEditor | fontSecurity" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="UXwH12U0V8vb7j7wDYNW-8">
          <mxGeometry y="420" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-14" value="错误日志捕获" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="450" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-13" value="中间件：render渲染" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" parent="UXwH12U0V8vb7j7wDYNW-8" vertex="1">
          <mxGeometry y="480" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-29" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-4" source="UXwH12U0V8vb7j7wDYNW-23" target="UXwH12U0V8vb7j7wDYNW-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="150" y="260" />
              <mxPoint x="10" y="260" />
              <mxPoint x="10" y="375" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-23" value="new Koa()" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-4" vertex="1">
          <mxGeometry x="90" y="180" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-24" value="启动项目&lt;br&gt;http://localhost:5100" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="50" y="210" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-36" target="UXwH12U0V8vb7j7wDYNW-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-36" value="buildCompilerDevMiddleware(app)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1000" y="50" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-56" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-37" target="UXwH12U0V8vb7j7wDYNW-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-37" value="middleware/server-render.dev.ts" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1005" y="130" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-58" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-40" target="UXwH12U0V8vb7j7wDYNW-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-40" value="将打包结果挂载到koa的context上&lt;br&gt;ctx.serverRender&lt;br&gt;ctx.clientRender" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1005" y="920" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-59" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-42" target="UXwH12U0V8vb7j7wDYNW-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-42" value="buildDev(app, onRenderUpdate)" style="swimlane;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="850" y="220" width="520" height="670" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-52" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" source="UXwH12U0V8vb7j7wDYNW-39" target="UXwH12U0V8vb7j7wDYNW-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-39" value="打开dev/build-dev.ts文件" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="155" y="40" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-43" value="configBuilder()&amp;nbsp;&lt;br&gt;&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;调用pc-live/buildConfig/，获取config设置&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="115" y="105" width="290" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-53" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" source="UXwH12U0V8vb7j7wDYNW-44" target="UXwH12U0V8vb7j7wDYNW-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-44" value="修改clientConfig配置：entry | output | plugins" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="127.5" y="180" width="265" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-45" value="webpack(clientConfig)&lt;br&gt;客户端打包" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="155" y="250" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-54" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" source="UXwH12U0V8vb7j7wDYNW-47" target="UXwH12U0V8vb7j7wDYNW-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-47" value="clientDevBuild添加DevMiddleware | HotMiddleware中间件" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="97.5" y="320" width="325" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-48" value="curDevBuild.clientCompiler调用钩子done()：&lt;br&gt;添加onRenderUpdate()监听&lt;br&gt;（钩子done在整个compilation完成时执行）" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="97.5" y="380" width="325" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-55" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" source="UXwH12U0V8vb7j7wDYNW-46" target="UXwH12U0V8vb7j7wDYNW-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-46" value="webpack(serverConfig）&lt;br&gt;服务端打包" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="155" y="460" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-49" value="修改服务端配置" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="155" y="530" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-50" value="服务端添加onRenderUpdate()监听" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="UXwH12U0V8vb7j7wDYNW-42" vertex="1">
          <mxGeometry x="135" y="600" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-57" value="next()" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1050" y="1020" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-30" value="开启服务&lt;br&gt;http://localhost:5100" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="495" y="1080" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-31" value="process进程异常处理" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="495" y="1150" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-33" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-30" target="UXwH12U0V8vb7j7wDYNW-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UXwH12U0V8vb7j7wDYNW-34" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="UXwH12U0V8vb7j7wDYNW-8" target="UXwH12U0V8vb7j7wDYNW-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="o4M6vwMC_JqI6t6oRqyh" name="第 2 页">
    <mxGraphModel dx="471" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="Qd1g2FpDXPzRKLWxGL1Y-0" />
        <mxCell id="Qd1g2FpDXPzRKLWxGL1Y-1" parent="Qd1g2FpDXPzRKLWxGL1Y-0" />
        <mxCell id="K5fgkPch0idttsLJqUKy-0" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" source="K5fgkPch0idttsLJqUKy-1" target="K5fgkPch0idttsLJqUKy-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-1" value="buildCompilerDevMiddleware(app)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" vertex="1">
          <mxGeometry x="1000" y="50" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-2" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" source="K5fgkPch0idttsLJqUKy-3" target="K5fgkPch0idttsLJqUKy-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-3" value="middleware/server-render.dev.ts" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" vertex="1">
          <mxGeometry x="1005" y="130" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-4" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" source="K5fgkPch0idttsLJqUKy-5" target="K5fgkPch0idttsLJqUKy-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-5" value="将打包结果挂载到koa的context上&lt;br&gt;ctx.serverRender&lt;br&gt;ctx.clientRender" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" vertex="1">
          <mxGeometry x="1005" y="920" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-6" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" source="K5fgkPch0idttsLJqUKy-7" target="K5fgkPch0idttsLJqUKy-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-7" value="buildDev(app, onRenderUpdate)" style="swimlane;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" vertex="1">
          <mxGeometry x="850" y="220" width="520" height="670" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-8" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" source="K5fgkPch0idttsLJqUKy-9" target="K5fgkPch0idttsLJqUKy-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-9" value="打开dev/build-dev.ts文件" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="155" y="40" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-10" value="configBuilder()&amp;nbsp;&lt;br&gt;&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;调用pc-live/buildConfig/，获取config设置&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="115" y="105" width="290" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-11" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" source="K5fgkPch0idttsLJqUKy-12" target="K5fgkPch0idttsLJqUKy-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-12" value="修改clientConfig配置" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="155" y="180" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-13" value="webpack(clientConfig)&lt;br&gt;客户端打包" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="155" y="250" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" source="K5fgkPch0idttsLJqUKy-15" target="K5fgkPch0idttsLJqUKy-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-15" value="clientDevBuild添加DevMiddleware | HotMiddleware中间件" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="97.5" y="320" width="325" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-16" value="clientCompiler调用插件done()完成客户端构建&lt;br&gt;添加onRenderUpdate()监听" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="125" y="390" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" source="K5fgkPch0idttsLJqUKy-18" target="K5fgkPch0idttsLJqUKy-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-18" value="webpack(serverConfig）&lt;br&gt;服务端打包" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="155" y="460" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-19" value="修改服务端配置" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="155" y="530" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-20" value="服务端添加onRenderUpdate()监听" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="K5fgkPch0idttsLJqUKy-7" vertex="1">
          <mxGeometry x="135" y="600" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K5fgkPch0idttsLJqUKy-21" value="next()" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" parent="Qd1g2FpDXPzRKLWxGL1Y-1" vertex="1">
          <mxGeometry x="1050" y="1020" width="120" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="-3jG3RJDcz0XUI_I4SNz" name="第 3 页">
    <mxGraphModel dx="471" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="oNIEtAsDkHMJREKI8ejO-0" />
        <mxCell id="oNIEtAsDkHMJREKI8ejO-1" parent="oNIEtAsDkHMJREKI8ejO-0" />
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-0" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" edge="1" parent="oNIEtAsDkHMJREKI8ejO-1" source="EKYErLyKsc3Qup4Cjkj9-1" target="EKYErLyKsc3Qup4Cjkj9-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-1" value="yarn build:dev" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" vertex="1" parent="oNIEtAsDkHMJREKI8ejO-1">
          <mxGeometry x="1170" y="50" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="oNIEtAsDkHMJREKI8ejO-1" source="EKYErLyKsc3Qup4Cjkj9-3" target="EKYErLyKsc3Qup4Cjkj9-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-3" value="yarn build:dev:modern&lt;br&gt;yarn build:dev:legacy" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="oNIEtAsDkHMJREKI8ejO-1">
          <mxGeometry x="1175" y="130" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="oNIEtAsDkHMJREKI8ejO-1" source="EKYErLyKsc3Qup4Cjkj9-7" target="EKYErLyKsc3Qup4Cjkj9-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-7" value="buildConfig/build.ts" style="swimlane;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="oNIEtAsDkHMJREKI8ejO-1">
          <mxGeometry x="920" y="230" width="720" height="290" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="EKYErLyKsc3Qup4Cjkj9-7" source="EKYErLyKsc3Qup4Cjkj9-9" target="EKYErLyKsc3Qup4Cjkj9-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-9" value="checkVersion：检查node和npm版本" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="EKYErLyKsc3Qup4Cjkj9-7">
          <mxGeometry x="155" y="40" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EKYErLyKsc3Qup4Cjkj9-7" source="EKYErLyKsc3Qup4Cjkj9-23" target="EKYErLyKsc3Qup4Cjkj9-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-23" value="buildCompile()" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="EKYErLyKsc3Qup4Cjkj9-7">
          <mxGeometry x="105" y="120" width="310" height="140" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-24" value="删除原文件夹" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="EKYErLyKsc3Qup4Cjkj9-23">
          <mxGeometry y="30" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-25" value="compile()：打包构建" style="text;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;fontStyle=1" vertex="1" parent="EKYErLyKsc3Qup4Cjkj9-23">
          <mxGeometry y="60" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-26" value="prod模式下，将env.SENTRY_RELEASE参数&#xa;注入到build/env.json中" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="EKYErLyKsc3Qup4Cjkj9-23">
          <mxGeometry y="90" width="310" height="50" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-33" value="&lt;span style=&quot;color: rgb(57 , 60 , 86)&quot;&gt;compile(mode): 打包client、server&lt;/span&gt;&lt;br style=&quot;color: rgb(57 , 60 , 86)&quot;&gt;&lt;span style=&quot;color: rgb(57 , 60 , 86)&quot;&gt;获取对应的webpackConfig配置&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontStyle=0;strokeColor=#d79b00;fillColor=#ffe6cc;startSize=30;" vertex="1" parent="EKYErLyKsc3Qup4Cjkj9-7">
          <mxGeometry x="460" y="160" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EKYErLyKsc3Qup4Cjkj9-21" value="打包完成" style="rounded=1;whiteSpace=wrap;html=1;labelBackgroundColor=none;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="oNIEtAsDkHMJREKI8ejO-1">
          <mxGeometry x="1220" y="580" width="120" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="1B1d5dVPqlQp_medPMWN" name="第 4 页">
    <mxGraphModel dx="471" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="Cp3QDDSx21MOjANdqv16-0" />
        <mxCell id="Cp3QDDSx21MOjANdqv16-1" parent="Cp3QDDSx21MOjANdqv16-0" />
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Cp3QDDSx21MOjANdqv16-1" source="Cp3QDDSx21MOjANdqv16-3" target="Cp3QDDSx21MOjANdqv16-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Cp3QDDSx21MOjANdqv16-3" value="yarn start" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-1">
          <mxGeometry x="1131" y="140" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Cp3QDDSx21MOjANdqv16-1" source="Cp3QDDSx21MOjANdqv16-7" target="kPkrQ5mPYOzcuhQqcFK1-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Cp3QDDSx21MOjANdqv16-7" value="server/server.ts" style="swimlane;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-1">
          <mxGeometry x="920" y="230" width="670" height="820" as="geometry" />
        </mxCell>
        <mxCell id="Cp3QDDSx21MOjANdqv16-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="Cp3QDDSx21MOjANdqv16-7" source="Cp3QDDSx21MOjANdqv16-9">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="321" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Cp3QDDSx21MOjANdqv16-9" value="debugFactory：开启debug" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-7">
          <mxGeometry x="216" y="40" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Cp3QDDSx21MOjANdqv16-7" source="Cp3QDDSx21MOjANdqv16-17" target="Cp3QDDSx21MOjANdqv16-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Cp3QDDSx21MOjANdqv16-17" value="new Koa()" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-7">
          <mxGeometry x="216" y="120" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="Cp3QDDSx21MOjANdqv16-7" source="Cp3QDDSx21MOjANdqv16-18" target="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Cp3QDDSx21MOjANdqv16-18" value="CSP配置：防止XSS攻击&lt;br&gt;控制用户能够加载哪些域下的资源" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-7">
          <mxGeometry x="216" y="190" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-0" value="引用中间件" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;sketch=0;fontColor=#393C56;strokeColor=#E07A5F;fillColor=#F2CC8F;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-7">
          <mxGeometry x="63.5" y="270" width="515" height="500" as="geometry">
            <mxRectangle x="30" y="300" width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-1" value="logMiddleware：日志" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="30" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-2" value="healthCheckMidlleware：健康检查" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="60" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-3" value="koaStatic：静态服务" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="90" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-5" value="honeypot：提供graphql查询服务" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="120" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-7" value="测试环境中间件：apiSwitch | devProxy" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="150" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-17" value="live和kankan下，开启sentry" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="180" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-8" value="其他中间件：fontSecurity | redirect | defaultCookies" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="210" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-9" value="其他中间件：thirdParty | sentryMiddleware" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="240" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-10" value="modeCheckMiddleware：检测浏览器支持的ES版本，&#xa;返回对应模式下的文件（legacy 和 modern）" style="text;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontStyle=1" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="270" width="515" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-19" value="添加中间件：fontSecurityMiddleware" style="text;strokeColor=#6c8ebf;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="320" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-11" value="添加clientRender：根据mode返回对应的html" style="text;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontStyle=1" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="350" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-12" value="添加serverRender：根据mode，获取对应的bundleRender，renderToString返回对应的html" style="text;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="380" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-13" value="render中间件：判断返回构建结果中的clientRender 或 serverRender" style="text;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="410" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-15" value="错误日志捕获" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="440" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-16" value="异常处理" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;rounded=0;sketch=0;fontColor=#393C56;" vertex="1" parent="kPkrQ5mPYOzcuhQqcFK1-0">
          <mxGeometry y="470" width="515" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kPkrQ5mPYOzcuhQqcFK1-25" value="环境启动：5100端口" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;" vertex="1" parent="Cp3QDDSx21MOjANdqv16-1">
          <mxGeometry x="1145" y="1100" width="220" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
